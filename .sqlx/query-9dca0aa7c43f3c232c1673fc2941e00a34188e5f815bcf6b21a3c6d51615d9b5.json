{
  "db_name": "PostgreSQL",
  "query": "\n            SELECT\n                pc.target_node_id as node_id,\n                en.endpoint_url,\n                pc.latency_ms,\n                pc.bandwidth_estimate_bps,\n                COALESCE(ca.available_chunks, 0) as \"available_chunks!: i32\"\n            FROM peer_connections pc\n            JOIN edge_nodes en ON en.id = pc.target_node_id\n            LEFT JOIN chunk_availability ca\n                ON ca.edge_node_id = pc.target_node_id AND ca.artifact_id = $2\n            WHERE pc.source_node_id = $1\n              AND pc.status = 'active'\n              AND en.status IN ('online', 'syncing')\n            ORDER BY pc.latency_ms ASC NULLS LAST\n            ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "node_id",
        "type_info": "Uuid"
      },
      {
        "ordinal": 1,
        "name": "endpoint_url",
        "type_info": "Varchar"
      },
      {
        "ordinal": 2,
        "name": "latency_ms",
        "type_info": "Int4"
      },
      {
        "ordinal": 3,
        "name": "bandwidth_estimate_bps",
        "type_info": "Int8"
      },
      {
        "ordinal": 4,
        "name": "available_chunks!: i32",
        "type_info": "Int4"
      }
    ],
    "parameters": {
      "Left": [
        "Uuid",
        "Uuid"
      ]
    },
    "nullable": [
      false,
      false,
      true,
      true,
      null
    ]
  },
  "hash": "9dca0aa7c43f3c232c1673fc2941e00a34188e5f815bcf6b21a3c6d51615d9b5"
}
